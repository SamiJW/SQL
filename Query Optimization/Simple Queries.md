# Let's review and consolidate some simple queries.

## CREATE TABLE with ALTER TABLE script - untouched
````sql
CREATE TABLE CUSTOMERS (
    CUSTOMER_ID NUMBER (6) NOT NULL,
    FIRST_NAME VARCHAR2 (25) NOT NULL,
    LAST_NAME VARCHAR2 (25) NOT NULL,
    STREET_ADDRESS VARCHAR2 (50),
    CITY VARCHAR2 (50),
    STATE VARCHAR2 (50),
    ZIP_CODE VARCHAR2 (10) ,
    COUNTRY CHAR (2),
    PHONE_NUMBER VARCHAR2 (25),
    EMAIL VARCHAR2 (50),
    DATE_OF_BIRTH DATE,
    GENDER VARCHAR2 (1)
);
  
CREATE TABLE BOOKS (
    BOOK_ID NUMBER (6) NOT NULL,
    BOOK_TITLE VARCHAR2 (250) NOT NULL,
    BOOK_DESCRIPTION VARCHAR2 (2000),
    BOOK_CATEGORY_CD CHAR (2) NOT NULL,
    BOOK_PRICE NUMBER (8,2),
    BOOK_REVIEWS NUMBER (5),
    USER_RATING NUMBER (2,1)
);
CREATE TABLE BOOK_CATEGORY (
    BOOK_CATEGORY_CD CHAR (2) NOT NULL,
    BOOK_CATEGORY_NAME VARCHAR2 (100) NOT NULL,
    BOOK_CATEGORY_DESCRIPTION VARCHAR2 (2000)
);
CREATE TABLE ORDERS (
    ORDER_NBR NUMBER (12) NOT NULL,
    CUSTOMER_ID NUMBER (6) NOT NULL,
    ORDER_DATE TIMESTAMP NOT NULL,
    ORDER_TOTAL NUMBER (8,2),
    EMPLOYEE_ID NUMBER (6)
);
CREATE TABLE ORDER_ITEMS (
    ORDER_ITEM_ID NUMBER (20) NOT NULL,
    ORDER_NBR NUMBER (12) NOT NULL,
    BOOK_ID NUMBER (6) NOT NULL,
    UNIT_PRICE NUMBER (8,2),
    QUANTITY NUMBER (8)
);
CREATE TABLE EMPLOYEES 
    (EMPLOYEE_ID NUMBER (6) NOT NULL,
    FIRST_NAME VARCHAR2 (25) NOT NULL,
    LAST_NAME VARCHAR2 (25) NOT NULL,
    TITLE VARCHAR2 (20) NOT NULL,
    MANAGER_ID NUMBER (6) NOT NULL,
    SALARY NUMBER (7) NOT NULL,
    STREET_ADDRESS VARCHAR2 (50),
    CITY VARCHAR2 (50),
    STATE VARCHAR2 (50),
    ZIP_CODE VARCHAR2 (10) ,
    COUNTRY CHAR (50),
    PHONE_NUMBER VARCHAR2 (25),
    EMAIL VARCHAR2 (50) NOT NULL,
    DATE_OF_BIRTH DATE,
    HIRE_DATE DATE NOT NULL,
    GENDER VARCHAR2 (1)
);

ALTER TABLE CUSTOMERS ADD CONSTRAINT PK_CUSTOMERS PRIMARY KEY (CUSTOMER_ID);
ALTER TABLE BOOKS ADD CONSTRAINT PK_BOOKS PRIMARY KEY (BOOK_ID);
ALTER TABLE BOOK_CATEGORY ADD CONSTRAINT PK_BOOK_CATEGORY PRIMARY KEY (BOOK_CATEGORY_CD);
ALTER TABLE ORDERS ADD CONSTRAINT PK_ORDERS PRIMARY KEY (ORDER_NBR);
ALTER TABLE EMPLOYEES ADD CONSTRAINT PK_EMPLOYEES PRIMARY KEY (EMPLOYEE_ID);

ALTER TABLE ORDER_ITEMS 
ADD CONSTRAINT FK_ORD_ITM_ORD FOREIGN KEY (ORDER_NBR)
REFERENCES ORDERS (ORDER_NBR);

ALTER TABLE ORDER_ITEMS 
ADD CONSTRAINT FK_ORD_ITM_PROD FOREIGN KEY (BOOK_ID)
REFERENCES BOOKS (BOOK_ID);

ALTER TABLE BOOKS 
ADD CONSTRAINT FK_BOOK_BOOK_CAT FOREIGN KEY (BOOK_CATEGORY_CD)
REFERENCES BOOK_CATEGORY (BOOK_CATEGORY_CD);

ALTER TABLE ORDERS 
ADD CONSTRAINT FK_ORD_CUST FOREIGN KEY (CUSTOMER_ID)
REFERENCES CUSTOMERS (CUSTOMER_ID);

ALTER TABLE ORDERS 
ADD CONSTRAINT FK_ORD_EMP FOREIGN KEY (EMPLOYEE_ID)
REFERENCES EMPLOYEES (EMPLOYEE_ID);
````

## Consolidated script
#### The consideration of consolidating this simple query script is only applicable prior to the initial run. The order of operations must be heavily considered when stating forgein key constraints within the CREATE TABLE statement. Hence the reason the order of tables created has been changed in this consolidated script. Otherwise an ALTER TABLE command is required proceeding the initial CREATE run as we see in the untouched script.
````sql
CREATE TABLE CUSTOMERS (
    CUSTOMER_ID NUMBER (6) NOT NULL,
    FIRST_NAME VARCHAR2 (25) NOT NULL,
    LAST_NAME VARCHAR2 (25) NOT NULL,
    STREET_ADDRESS VARCHAR2 (50),
    CITY VARCHAR2 (50),
    STATE VARCHAR2 (50),
    ZIP_CODE VARCHAR2 (10),
    COUNTRY CHAR (2),
    PHONE_NUMBER VARCHAR2 (25),
    EMAIL VARCHAR2 (50),
    DATE_OF_BIRTH DATE,
    GENDER VARCHAR2 (1),
    CONSTRAINT PK_CUSTOMERS PRIMARY KEY (CUSTOMER_ID)
);
CREATE TABLE EMPLOYEES (
    EMPLOYEE_ID NUMBER (6) NOT NULL,
    FIRST_NAME VARCHAR2 (25) NOT NULL,
    LAST_NAME VARCHAR2 (25) NOT NULL,
    TITLE VARCHAR2 (20) NOT NULL,
    MANAGER_ID NUMBER (6) NOT NULL,
    SALARY NUMBER (7) NOT NULL,
    STREET_ADDRESS VARCHAR2 (50),
    CITY VARCHAR2 (50),
    STATE VARCHAR2 (50),
    ZIP_CODE VARCHAR2 (10) ,
    COUNTRY CHAR (50),
    PHONE_NUMBER VARCHAR2 (25),
    EMAIL VARCHAR2 (50) NOT NULL,
    DATE_OF_BIRTH DATE,
    HIRE_DATE DATE NOT NULL,
    GENDER VARCHAR2 (1),
    CONSTRAINT PK_EMPLOYEES PRIMARY KEY (EMPLOYEE_ID)
);
CREATE TABLE BOOK_CATEGORY (
    BOOK_CATEGORY_CD CHAR (2) NOT NULL,
    BOOK_CATEGORY_NAME VARCHAR2 (100) NOT NULL,
    BOOK_CATEGORY_DESCRIPTION VARCHAR2 (2000),
    CONSTRAINT PK_BOOK_CATEGORY PRIMARY KEY (BOOK_CATEGORY_CD)
);
CREATE TABLE BOOKS (
    BOOK_ID NUMBER (6) NOT NULL,
    BOOK_TITLE VARCHAR2 (250) NOT NULL,
    BOOK_DESCRIPTION VARCHAR2 (2000),
    BOOK_CATEGORY_CD CHAR (2) NOT NULL,
    BOOK_PRICE NUMBER (8,2),
    BOOK_REVIEWS NUMBER (5),
    USER_RATING NUMBER (2,1),
    CONSTRAINT PK_BOOKS PRIMARY KEY (BOOK_ID),
    CONSTRAINT FK_BOOK_BOOK_CAT FOREIGN KEY (BOOK_CATEGORY_CD) REFERENCES BOOK_CATEGORY (BOOK_CATEGORY_CD)
);
CREATE TABLE ORDERS (
    ORDER_NBR NUMBER (12) NOT NULL,
    CUSTOMER_ID NUMBER (6) NOT NULL,
    ORDER_DATE TIMESTAMP NOT NULL,
    ORDER_TOTAL NUMBER (8,2),
    EMPLOYEE_ID NUMBER (6),
    CONSTRAINT PK_ORDERS PRIMARY KEY (ORDER_NBR),
    CONSTRAINT FK_ORD_CUST FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS (CUSTOMER_ID),
    CONSTRAINT FK_ORD_EMP FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEES (EMPLOYEE_ID)
);
CREATE TABLE ORDER_ITEMS (
    ORDER_ITEM_ID NUMBER(20) NOT NULL,
    ORDER_NBR NUMBER(12) NOT NULL,
    BOOK_ID NUMBER(6) NOT NULL,
    UNIT_PRICE NUMBER(8,2) NOT NULL,
    QUANTITY NUMBER(6) NOT NULL,
    CONSTRAINT PK_ORDER_ITEMS PRIMARY KEY (ORDER_ITEM_ID),
    CONSTRAINT FK_ORD_ITM_ORD FOREIGN KEY (ORDER_NBR) REFERENCES ORDERS (ORDER_NBR),
    CONSTRAINT FK_ORD_ITM_PROD FOREIGN KEY (BOOK_ID) REFERENCES BOOKS (BOOK_ID),
    CONSTRAINT UK_ORD_ITM UNIQUE (ORDER_NBR, BOOK_ID)
);
````
